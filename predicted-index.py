from flask import Flask, render_template, request
import numpy as np

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/system')
def system():
    return render_template('system.html')

@app.route('/predict', methods=['POST'])
def predict():
    global crime_index
    city = request.form['city']
    year = request.form['year']
    safetyMeasurement = ""
    predicted_index = 0
    
    crime_index = [['A & N ISLANDS', 2001, '0.002474'], ['A & N ISLANDS', 2002, '0.002253'], ['A & N ISLANDS', 2003, '0.002461'], ['A & N ISLANDS', 2004, '0.002955'], ['A & N ISLANDS', 2005, '0.002648'], ['A & N ISLANDS', 2006, '0.002704'], ['A & N ISLANDS', 2007, '0.003377'], ['A & N ISLANDS', 2008, '0.003719'], ['A & N ISLANDS', 2009, '0.003978'], ['A & N ISLANDS', 2010, '0.004086'], ['A & N ISLANDS', 2011, '0.003241'], ['A & N ISLANDS', 2012, '0.002741'], ['ANDHRA PRADESH', 2001, '0.554058'], ['ANDHRA PRADESH', 2002, '0.612069'], ['ANDHRA PRADESH', 2003, '0.677994'], ['ANDHRA PRADESH', 2004, '0.685799'], ['ANDHRA PRADESH', 2005, '0.681003'], ['ANDHRA PRADESH', 2006, '0.742636'], ['ANDHRA PRADESH', 2007, '0.751689'], ['ANDHRA PRADESH', 2008, '0.770965'], ['ANDHRA PRADESH', 2009, '0.773478'], ['ANDHRA PRADESH', 2010, '0.787016'], ['ANDHRA PRADESH', 2011, '0.828517'], ['ANDHRA PRADESH', 2012, '0.831754'], ['ARUNACHAL PRADESH', 2001, '0.011176'], ['ARUNACHAL PRADESH', 2002, '0.010448'], ['ARUNACHAL PRADESH', 2003, '0.009714'], ['ARUNACHAL PRADESH', 2004, '0.010528'], ['ARUNACHAL PRADESH', 2005, '0.011258'], ['ARUNACHAL PRADESH', 2006, '0.010906'], ['ARUNACHAL PRADESH', 2007, '0.011185'], ['ARUNACHAL PRADESH', 2008, '0.011179'], ['ARUNACHAL PRADESH', 2009, '0.010912'], ['ARUNACHAL PRADESH', 2010, '0.011585'], ['ARUNACHAL PRADESH', 2011, '0.010960'], ['ARUNACHAL PRADESH', 2012, '0.011373'], ['ASSAM', 2001, '0.177550'], ['ASSAM', 2002, '0.179317'], ['ASSAM', 2003, '0.187082'], ['ASSAM', 2004, '0.198444'], ['ASSAM', 2005, '0.203275'], ['ASSAM', 2006, '0.216641'], ['ASSAM', 2007, '0.224676'], ['ASSAM', 2008, '0.256481'], ['ASSAM', 2009, '0.265651'], ['ASSAM', 2010, '0.294479'], ['ASSAM', 2011, '0.313565'], ['ASSAM', 2012, '0.369571'], ['BIHAR', 2001, '0.404568'], ['BIHAR', 2002, '0.428562'], ['BIHAR', 2003, '0.422927'], ['BIHAR', 2004, '0.493812'], ['BIHAR', 2005, '0.443881'], ['BIHAR', 2006, '0.457086'], ['BIHAR', 2007, '0.484190'], ['BIHAR', 2008, '0.534402'], ['BIHAR', 2009, '0.543125'], ['BIHAR', 2010, '0.561839'], ['BIHAR', 2011, '0.601834'], ['BIHAR', 2012, '0.657154'], ['CHANDIGARH', 2001, '0.018256'], ['CHANDIGARH', 2002, '0.020319'], ['CHANDIGARH', 2003, '0.015186'], ['CHANDIGARH', 2004, '0.016309'], ['CHANDIGARH', 2005, '0.016899'], ['CHANDIGARH', 2006, '0.016502'], ['CHANDIGARH', 2007, '0.020282'], ['CHANDIGARH', 2008, '0.022376'], ['CHANDIGARH', 2009, '0.020332'], ['CHANDIGARH', 2010, '0.018705'], ['CHANDIGARH', 2011, '0.019686'], ['CHANDIGARH', 2012, '0.020117'], ['CHHATTISGARH', 2001, '0.170219'], ['CHHATTISGARH', 2002, '0.165243'], ['CHHATTISGARH', 2003, '0.165071'], ['CHHATTISGARH', 2004, '0.182373'], ['CHHATTISGARH', 2005, '0.191362'], ['CHHATTISGARH', 2006, '0.196314'], ['CHHATTISGARH', 2007, '0.198851'], ['CHHATTISGARH', 2008, '0.221994'], ['CHHATTISGARH', 2009, '0.220529'], ['CHHATTISGARH', 2010, '0.232762'], ['CHHATTISGARH', 2011, '0.238994'], ['CHHATTISGARH', 2012, '0.228888'], ['D & N HAVELI', 2001, '0.001334'], ['D & N HAVELI', 2002, '0.001518'], ['D & N HAVELI', 2003, '0.001430'], ['D & N HAVELI', 2004, '0.001676'], ['D & N HAVELI', 2005, '0.001793'], ['D & N HAVELI', 2006, '0.001814'], ['D & N HAVELI', 2007, '0.001840'], ['D & N HAVELI', 2008, '0.001713'], ['D & N HAVELI', 2009, '0.001907'], ['D & N HAVELI', 2010, '0.001653'], ['D & N HAVELI', 2011, '0.001634'], ['D & N HAVELI', 2012, '0.001375'], ['DAMAN & DIU', 2001, '0.000982'], ['DAMAN & DIU', 2002, '0.001131'], ['DAMAN & DIU', 2003, '0.001142'], ['DAMAN & DIU', 2004, '0.000728'], ['DAMAN & DIU', 2005, '0.001025'], ['DAMAN & DIU', 2006, '0.001290'], ['DAMAN & DIU', 2007, '0.001128'], ['DAMAN & DIU', 2008, '0.001051'], ['DAMAN & DIU', 2009, '0.001089'], ['DAMAN & DIU', 2010, '0.000840'], ['DAMAN & DIU', 2011, '0.000958'], ['DAMAN & DIU', 2012, '0.001043'], ['DELHI UT', 2001, '0.278498'], ['DELHI UT', 2002, '0.249018'], ['DELHI UT', 2003, '0.240122'], ['DELHI UT', 2004, '0.275381'], ['DELHI UT', 2005, '0.283561'], ['DELHI UT', 2006, '0.288671'], ['DELHI UT', 2007, '0.282336'], ['DELHI UT', 2008, '0.265288'], ['DELHI UT', 2009, '0.286519'], ['DELHI UT', 2010,'0.300414'], ['DELHI UT', 2011, '0.311153'], ['DELHI UT', 2012, '0.314489'], ['GOA', 2001, '0.010874'], ['GOA', 2002, '0.010916'], ['GOA', 2003, '0.010197'], ['GOA', 2004, '0.009807'], ['GOA', 2005, '0.009862'], ['GOA', 2006, '0.010173'], ['GOA', 2007, '0.011079'], ['GOA', 2008, '0.012816'], ['GOA', 2009, '0.014775'], ['GOA', 2010, '0.016213'], ['GOA', 2011, '0.017072'], ['GOA', 2012, '0.017169'], ['GUJARAT', 2001, '0.434765'], ['GUJARAT', 2002, '0.454141'], ['GUJARAT', 2003, '0.451141'], ['GUJARAT', 2004, '0.454154'], ['GUJARAT', 2005, '0.476473'], ['GUJARAT', 2006, '0.504482'], ['GUJARAT', 2007, '0.513235'], ['GUJARAT', 2008, '0.528435'], ['GUJARAT', 2009, '0.496894'], ['GUJARAT', 2010, '0.489450'], ['GUJARAT', 2011, '0.511811'], ['GUJARAT', 2012, '0.536253'], ['HARYANA', 2001, '0.174206'], ['HARYANA', 2002, '0.177036'], ['HARYANA', 2003, '0.169687'], ['HARYANA', 2004, '0.176650'], ['HARYANA', 2005, '0.200628'], ['HARYANA', 2006, '0.238970'], ['HARYANA', 2007, '0.245495'], ['HARYANA', 2008, '0.266657'], ['HARYANA', 2009, '0.272798'], ['HARYANA', 2010, '0.301197'], ['HARYANA', 2011, '0.313181'], ['HARYANA', 2012, '0.322796'], ['HIMACHAL PRADESH', 2001, '0.045511'], ['HIMACHAL PRADESH', 2002, '0.047663'], ['HIMACHAL PRADESH', 2003, '0.046747'], ['HIMACHAL PRADESH', 2004, '0.048173'], ['HIMACHAL PRADESH', 2005, '0.048061'], ['HIMACHAL PRADESH', 2006, '0.050895'], ['HIMACHAL PRADESH', 2007, '0.056845'], ['HIMACHAL PRADESH', 2008, '0.056181'], ['HIMACHAL PRADESH', 2009, '0.052929'], ['HIMACHAL PRADESH', 2010, '0.052330'], ['HIMACHAL PRADESH', 2011, '0.057399'], ['HIMACHAL PRADESH', 2012, '0.050302'], ['JAMMU & KASHMIR', 2001, '0.091712'], ['JAMMU & KASHMIR', 2002, '0.093445'], ['JAMMU & KASHMIR', 2003, '0.097467'], ['JAMMU & KASHMIR', 2004, '0.096508'], ['JAMMU & KASHMIR', 2005, '0.090931'], ['JAMMU & KASHMIR', 2006, '0.093282'], ['JAMMU & KASHMIR', 2007, '0.094827'], ['JAMMU & KASHMIR', 2008, '0.091566'], ['JAMMU & KASHMIR', 2009, '0.098881'], ['JAMMU & KASHMIR', 2010, '0.104154'], ['JAMMU & KASHMIR', 2011, '0.108922'], ['JAMMU & KASHMIR', 2012, '0.106665'], ['JHARKHAND', 2001, '0.125146'], ['JHARKHAND', 2002, '0.149728'], ['JHARKHAND', 2003, '0.151328'], ['JHARKHAND', 2004, '0.149728'], ['JHARKHAND', 2005, '0.169746'], ['JHARKHAND', 2006, '0.174492'], ['JHARKHAND', 2007, '0.187121'], ['JHARKHAND', 2008, '0.188406'], ['JHARKHAND', 2009, '0.186690'], ['JHARKHAND', 2010, '0.189299'], ['JHARKHAND', 2011, '0.173895'], ['JHARKHAND', 2012, '0.194795'], ['KARNATAKA', 2001, '0.452030'], ['KARNATAKA', 2002, '0.472503'], ['KARNATAKA', 2003, '0.464163'], ['KARNATAKA', 2004, '0.479600'], ['KARNATAKA', 2005, '0.496220'], ['KARNATAKA', 2006, '0.491523'], ['KARNATAKA', 2007, '0.499283'], ['KARNATAKA', 2008, '0.543152'], ['KARNATAKA', 2009, '0.583438'], ['KARNATAKA', 2010, '0.616036'], ['KARNATAKA', 2011, '0.600594'], ['KARNATAKA', 2012, '0.584508'], ['KERALA', 2001, '0.399710'], ['KERALA', 2002, '0.402060'], ['KERALA', 2003, '0.378373'], ['KERALA', 2004, '0.398858'], ['KERALA', 2005, '0.398983'], ['KERALA', 2006, '0.404602'], ['KERALA', 2007, '0.418899'], ['KERALA', 2008, '0.426773'], ['KERALA', 2009, '0.449637'], ['KERALA', 2010, '0.542466'], ['KERALA', 2011, '0.633827'], ['KERALA', 2012, '0.587283'], ['LAKSHADWEEP', 2001, '0.000000'], ['LAKSHADWEEP', 2002, '0.000106'], ['LAKSHADWEEP', 2003, '0.000006'], ['LAKSHADWEEP', 2004, '0.000148'], ['LAKSHADWEEP', 2005, '0.000016'], ['LAKSHADWEEP', 2006, '0.000191'], ['LAKSHADWEEP', 2007, '0.000114'], ['LAKSHADWEEP', 2008, '0.000230'], ['LAKSHADWEEP', 2009, '0.000408'], ['LAKSHADWEEP', 2010, '0.000008'], ['LAKSHADWEEP', 2011, '0.000011'], ['LAKSHADWEEP', 2012, '0.000087'], ['MADHYA PRADESH', 2001, '0.760901'], ['MADHYA PRADESH', 2002, '0.796056'], ['MADHYA PRADESH', 2003, '0.786061'], ['MADHYA PRADESH', 2004, '0.814521'], ['MADHYA PRADESH', 2005, '0.781609'], ['MADHYA PRADESH', 2006, '0.803405'], ['MADHYA PRADESH', 2007, '0.837077'], ['MADHYA PRADESH', 2008, '0.859486'], ['MADHYA PRADESH', 2009, '0.860987'], ['MADHYA PRADESH', 2010, '0.878157'], ['MADHYA PRADESH', 2011, '0.893505'], ['MADHYA PRADESH', 2012, '0.906886'], ['MAHARASHTRA', 2001, '0.796100'], ['MAHARASHTRA', 2002, '0.767010'], ['MAHARASHTRA', 2003, '0.760511'], ['MAHARASHTRA', 2004, '0.829052'], ['MAHARASHTRA', 2005, '0.883716'], ['MAHARASHTRA', 2006, '0.902376'], ['MAHARASHTRA', 2007, '0.922910'], ['MAHARASHTRA', 2008, '0.987552'], ['MAHARASHTRA', 2009, '0.958473'], ['MAHARASHTRA', 2010, '1.000000'], ['MAHARASHTRA', 2011, '0.997661'], ['MAHARASHTRA', 2012, '0.978592'], ['MANIPUR', 2001, '0.011685'], ['MANIPUR', 2002, '0.012000'], ['MANIPUR', 2003, '0.011753'], ['MANIPUR', 2004, '0.012157'], ['MANIPUR', 2005, '0.013730'], ['MANIPUR', 2006, '0.013795'], ['MANIPUR', 2007, '0.016299'], ['MANIPUR', 2008, '0.017230'], ['MANIPUR', 2009, '0.014958'], ['MANIPUR', 2010, '0.013846'], ['MANIPUR', 2011, '0.016953'], ['MANIPUR', 2012, '0.020448'], ['MEGHALAYA', 2001, '0.008739'], ['MEGHALAYA', 2002, '0.009058'], ['MEGHALAYA', 2003, '0.009246'], ['MEGHALAYA', 2004, '0.009457'], ['MEGHALAYA', 2005, '0.010258'], ['MEGHALAYA', 2006, '0.010556'], ['MEGHALAYA', 2007, '0.011126'], ['MEGHALAYA', 2008, '0.012537'], ['MEGHALAYA', 2009, '0.012847'], ['MEGHALAYA', 2010, '0.013711'], ['MEGHALAYA', 2011, '0.014855'], ['MEGHALAYA', 2012, '0.013661'], ['MIZORAM', 2001, '0.011585'], ['MIZORAM', 2002, '0.014124'], ['MIZORAM', 2003, '0.017212'], ['MIZORAM', 2004, '0.007781'], ['MIZORAM', 2005, '0.010846'], ['MIZORAM', 2006, '0.010834'], ['MIZORAM', 2007, '0.011255'], ['MIZORAM', 2008, '0.010405'], ['MIZORAM', 2009, '0.010793'], ['MIZORAM', 2010, '0.011733'], ['MIZORAM', 2011, '0.009809'], ['MIZORAM', 2012, '0.009417'], ['NAGALAND', 2001, '0.006446'], ['NAGALAND', 2002, '0.005933'], ['NAGALAND', 2003, '0.005175'], ['NAGALAND', 2004, '0.005178'], ['NAGALAND', 2005, '0.005654'], ['NAGALAND', 2006, '0.006266'], ['NAGALAND', 2007, '0.006571'], ['NAGALAND', 2008, '0.006960'], ['NAGALAND', 2009, '0.005800'], ['NAGALAND', 2010, '0.005784'], ['NAGALAND', 2011, '0.005753'], ['NAGALAND', 2012, '0.005885'], ['ODISHA', 2001, '0.205695'], ['ODISHA', 2002, '0.208503'], ['ODISHA', 2003, '0.206839'], ['ODISHA', 2004, '0.214952'], ['ODISHA', 2005, '0.230847'], ['ODISHA', 2006, '0.234865'], ['ODISHA', 2007, '0.245695'], ['ODISHA', 2008, '0.261028'], ['ODISHA', 2009, '0.254956'], ['ODISHA', 2010, '0.260673'], ['ODISHA', 2011, '0.285259'], ['ODISHA', 2012, '0.320934'], ['PUDUCHERRY', 2001, '0.015898'], ['PUDUCHERRY', 2002, '0.017348'], ['PUDUCHERRY', 2003, '0.017699'], ['PUDUCHERRY', 2004, '0.018089'], ['PUDUCHERRY', 2005, '0.017262'], ['PUDUCHERRY', 2006, '0.018311'], ['PUDUCHERRY', 2007, '0.020586'], ['PUDUCHERRY', 2008, '0.019953'], ['PUDUCHERRY', 2009, '0.018669'], ['PUDUCHERRY', 2010, '0.015790'], ['PUDUCHERRY', 2011, '0.017880'], ['PUDUCHERRY', 2012, '0.017551'], ['PUNJAB', 2001, '0.123427'], ['PUNJAB', 2002, '0.126428'], ['PUNJAB', 2003, '0.127938'], ['PUNJAB', 2004, '0.114422'], ['PUNJAB', 2005, '0.120954'], ['PUNJAB', 2006, '0.144487'], ['PUNJAB', 2007, '0.163943'], ['PUNJAB', 2008, '0.163212'], ['PUNJAB', 2009, '0.165058'], ['PUNJAB', 2010, '0.170193'], ['PUNJAB', 2011, '0.159867'], ['PUNJAB', 2012, '0.168085'], ['RAJASTHAN', 2001, '0.657352'], ['RAJASTHAN', 2002, '0.636033'], ['RAJASTHAN', 2003, '0.610231'], ['RAJASTHAN', 2004, '0.652694'], ['RAJASTHAN', 2005, '0.596812'], ['RAJASTHAN', 2006, '0.604763'], ['RAJASTHAN', 2007, '0.641475'], ['RAJASTHAN', 2008, '0.655744'], ['RAJASTHAN', 2009, '0.728378'], ['RAJASTHAN', 2010, '0.722320'], ['RAJASTHAN', 2011, '0.731681'], ['RAJASTHAN', 2012, '0.765537'], ['SIKKIM', 2001, '0.001909'], ['SIKKIM', 2002, '0.002048'], ['SIKKIM', 2003, '0.001832'], ['SIKKIM', 2004, '0.002630'], ['SIKKIM', 2005, '0.002471'], ['SIKKIM', 2006, '0.003120'], ['SIKKIM', 2007, '0.002995'], ['SIKKIM', 2008, '0.003199'], ['SIKKIM', 2009, '0.002792'], ['SIKKIM', 2010, '0.002307'], ['SIKKIM', 2011, '0.002555'], ['SIKKIM', 2012, '0.002617'], ['TAMIL NADU', 2001, '0.612811'], ['TAMIL NADU', 2002, '0.658232'], ['TAMIL NADU', 2003, '0.620827'], ['TAMIL NADU', 2004, '0.645620'], ['TAMIL NADU', 2005, '0.624789'], ['TAMIL NADU', 2006, '0.566700'], ['TAMIL NADU', 2007, '0.651989'], ['TAMIL NADU', 2008, '0.676413'], ['TAMIL NADU', 2009, '0.674188'], ['TAMIL NADU', 2010, '0.715225'], ['TAMIL NADU', 2011, '0.741816'], ['TAMIL NADU', 2012, '0.758821'], ['TRIPURA', 2001, '0.013666'], ['TRIPURA', 2002, '0.014940'], ['TRIPURA', 2003, '0.017095'], ['TRIPURA', 2004, '0.015151'], ['TRIPURA', 2005, '0.016341'], ['TRIPURA', 2006, '0.019085'], ['TRIPURA', 2007, '0.020136'], ['TRIPURA', 2008, '0.025166'], ['TRIPURA', 2009, '0.025211'], ['TRIPURA', 2010, '0.026969'], ['TRIPURA', 2011, '0.026577'], ['TRIPURA', 2012, '0.028642'], ['UTTAR PRADESH', 2001, '0.848590'], ['UTTAR PRADESH', 2002, '0.694656'], ['UTTAR PRADESH', 2003, '0.458969'], ['UTTAR PRADESH', 2004, '0.633593'], ['UTTAR PRADESH', 2005, '0.593189'], ['UTTAR PRADESH', 2006, '0.612139'], ['UTTAR PRADESH', 2007, '0.715891'], ['UTTAR PRADESH', 2008, '0.796876'], ['UTTAR PRADESH', 2009, '0.828716'], ['UTTAR PRADESH', 2010, '0.841831'], ['UTTAR PRADESH', 2011, '0.960025'], ['UTTAR PRADESH', 2012, '0.979143'], ['UTTARAKHAND', 2001, '0.038781'], ['UTTARAKHAND', 2002, '0.038312'], ['UTTARAKHAND', 2003, '0.038166'], ['UTTARAKHAND', 2004, '0.041858'], ['UTTARAKHAND', 2005, '0.039745'], ['UTTARAKHAND', 2006, '0.041874'], ['UTTARAKHAND', 2007, '0.046117'], ['UTTARAKHAND', 2008, '0.042565'], ['UTTARAKHAND', 2009, '0.042754'], ['UTTARAKHAND', 2010, '0.045966'], ['UTTARAKHAND', 2011, '0.044327'], ['UTTARAKHAND', 2012, '0.044456'], ['WEST BENGAL', 2001, '0.288843'], ['WEST BENGAL', 2002, '0.272999'], ['WEST BENGAL', 2003, '0.286223'], ['WEST BENGAL', 2004, '0.327767'], ['WEST BENGAL', 2005, '0.313954'], ['WEST BENGAL', 2006, '0.323757'], ['WEST BENGAL', 2007, '0.383678'], ['WEST BENGAL', 2008, '0.492180'], ['WEST BENGAL', 2009, '0.530170'], ['WEST BENGAL', 2010, '0.600205'], ['WEST BENGAL', 2011, '0.660101'], ['WEST BENGAL', 2012, '0.734598']]
    
    #converting year values into string
    for y in crime_index:
        y[1] = str(y[1])
        
    #converting crime_index array into numpy
    crime_index = np.array(crime_index)
    
    #PREDICTING INDEX: crime index stored in variable
    for data in crime_index:
        if(city==data[0]) or (year==data[1]):
            predicted_index = data[2]
            break
    
    if float(data[2])<=0.25:
        safetyMeasurement+='Safe'
    else:
        safetyMeasurement+='Unsafe'
        
    return render_template('prediction.html', city=city, year=year, predicted_index=predicted_index, safety_measurement=safetyMeasurement)

if __name__ == '__main__':
    app.run(debug=True)
